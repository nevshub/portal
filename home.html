<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Home</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Welcome to the Home Page</h1>

  <!-- Cover Photo -->
  <div id="coverContainer">
    <img id="coverPhoto" src="" alt="Cover Photo" style="width:100%; max-width:800px; height:200px; object-fit:cover;">
    <input type="file" id="coverInput" style="display:none;">
    <button id="changeCover" class="button" style="display:none;">Change Cover</button>
  </div>

  <!-- Profile Photo -->
  <div id="profileContainer" style="margin-top:20px;">
    <img id="profilePhoto" src="" alt="Profile Photo" style="width:150px; height:150px; border-radius:50%; object-fit:cover;">
    <input type="file" id="profileInput" style="display:none;">
    <button id="changeProfile" class="button" style="display:none;">Change Profile</button>
  </div>

  <!-- Admin Wall Button (Admin Only) -->
  <div id="adminWallBtnContainer" style="display:none;">
    <a href="adminWall.html" class="button">Admin Wall</a>
  </div>

  <a href="news.html" class="button">News Feed</a>
  <a href="projects.html" class="button">Projects</a>
  <a href="notes.html" class="button">Notes</a>

  <!-- Admin's Main Page in Progress -->
  <a href="https://your-grove-link.com" class="button" target="_blank">
    Admin's Main Page in Progress
  </a>

  <!-- Streaming -->
  <div style="margin-top:20px;">
    <button id="startStreamBtn" class="button" style="display:none;">Start Stream</button>
    <button id="joinStreamBtn" class="button" style="display:none;">Join Stream</button>
  </div>

  <script>
    const ADMIN_PASSWORD = "Nev123";

    // Ask for Admin password
    let role = localStorage.getItem("userRole") || "guest";
    if(role !== "member") {
      const input = prompt("Enter Admin password (leave empty if guest):");
      if(input === ADMIN_PASSWORD) {
        role = "admin";
        localStorage.setItem("userRole", "admin");
      } else if(input) {
        role = "member";
        localStorage.setItem("userRole", "member");
      } else {
        role = "guest";
        localStorage.setItem("userRole", "guest");
      }
    }

    // Elements
    const coverPhoto = document.getElementById("coverPhoto");
    const profilePhoto = document.getElementById("profilePhoto");
    const coverInput = document.getElementById("coverInput");
    const profileInput = document.getElementById("profileInput");
    const changeCover = document.getElementById("changeCover");
    const changeProfile = document.getElementById("changeProfile");
    const adminWallBtn = document.getElementById("adminWallBtnContainer");
    const startStreamBtn = document.getElementById("startStreamBtn");
    const joinStreamBtn = document.getElementById("joinStreamBtn");

    // Show admin/member options
    if(role === "admin" || role === "member") {
      changeCover.style.display = "inline-block";
      changeProfile.style.display = "inline-block";
      joinStreamBtn.style.display = "inline-block";
      if(role === "admin") {
        startStreamBtn.style.display = "inline-block";
        adminWallBtn.style.display = "block";
      }
    }

    // Load saved images
    coverPhoto.src = localStorage.getItem("coverPhoto") || "";
    profilePhoto.src = localStorage.getItem("profilePhoto") || "";

    // Change Cover Photo
    changeCover.addEventListener("click", () => coverInput.click());
    coverInput.addEventListener("change", () => {
      const file = coverInput.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = () => {
          coverPhoto.src = reader.result;
          localStorage.setItem("coverPhoto", reader.result);
        };
        reader.readAsDataURL(file);
      }
    });

    // Change Profile Photo
    changeProfile.addEventListener("click", () => profileInput.click());
    profileInput.addEventListener("change", () => {
      const file = profileInput.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = () => {
          profilePhoto.src = reader.result;
          localStorage.setItem("profilePhoto", reader.result);
        };
        reader.readAsDataURL(file);
      }
    });
  </script>

  <script src="profileStream.js"></script>
</body>
</html>
